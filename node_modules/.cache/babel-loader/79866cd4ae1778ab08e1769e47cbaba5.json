{"ast":null,"code":"import { SET_USER, SET_ERRORS, CLEAR_ERRORS, LOADING_UI, SET_UNAUTHENTICATED, LOADING_USER } from '../types';\nimport axios from 'axios';\nexport var loginUser = function loginUser(userData, history) {\n  return function (dispatch) {\n    dispatch({\n      type: LOADING_UI\n    });\n    axios.post('/login', userData).then(function (res) {\n      setAuthorizationHeader(res.data.token);\n      dispatch(getUserData());\n      dispatch({\n        type: CLEAR_ERRORS\n      }); // clears the error before it redirects\n\n      history.push('/'); // redirects to homepage upon successful login\n    }).catch(function (err) {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n    });\n  };\n};\nexport var signupUser = function signupUser(newUserData, history) {\n  return function (dispatch) {\n    dispatch({\n      type: LOADING_UI\n    });\n    axios.post('/signup', newUserData).then(function (res) {\n      setAuthorizationHeader(res.data.token);\n      dispatch(getUserData());\n      dispatch({\n        type: CLEAR_ERRORS\n      }); // clears the error before it redirects\n\n      history.push('/'); // redirects to homepage upon successful login\n    }).catch(function (err) {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data\n      });\n    });\n  };\n};\nexport var logoutUser = function logoutUser() {\n  return function (dispatch) {\n    localStorage.removeItem('FBIdToken');\n    delete axios.defaults.headers.common['Authorization'];\n    dispatch({\n      type: SET_UNAUTHENTICATED\n    });\n  };\n};\nexport var getUserData = function getUserData() {\n  return function (dispatch) {\n    dispatch({\n      type: LOADING_USER\n    });\n    axios.get('/user').then(function (res) {\n      dispatch({\n        type: SET_USER,\n        payload: res.data\n      });\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n};\nexport var uploadImage = function uploadImage(formData) {\n  return function (dispatch) {\n    dispatch({\n      type: LOADING_USER\n    });\n    axios.post('/user/image', formData).then(function () {\n      dispatch(getUserData());\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n};\nexport var editUserDetails = function editUserDetails(userDetails) {\n  return function (dispatch) {\n    dispatch({\n      type: LOADING_USER\n    });\n    axios.post('/user', userDetails).then(function () {\n      dispatch(getUserData());\n    }).catch(function (err) {\n      return console.log(err);\n    });\n  };\n};\n\nvar setAuthorizationHeader = function setAuthorizationHeader(token) {\n  var FBIdToken = \"Bearer \".concat(token);\n  localStorage.setItem('FBIdToken', FBIdToken);\n  axios.defaults.headers.common['Authorization'] = FBIdToken;\n};","map":{"version":3,"sources":["/Volumes/extra/is295/plantrs-ph-app/src/redux/actions/userActions.js"],"names":["SET_USER","SET_ERRORS","CLEAR_ERRORS","LOADING_UI","SET_UNAUTHENTICATED","LOADING_USER","axios","loginUser","userData","history","dispatch","type","post","then","res","setAuthorizationHeader","data","token","getUserData","push","catch","err","payload","response","signupUser","newUserData","logoutUser","localStorage","removeItem","defaults","headers","common","get","console","log","uploadImage","formData","editUserDetails","userDetails","FBIdToken","setItem"],"mappings":"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","sourcesContent":["import { \n    SET_USER, \n    SET_ERRORS, \n    CLEAR_ERRORS, \n    LOADING_UI, \n    SET_UNAUTHENTICATED,\n    LOADING_USER \n} from '../types';\nimport axios from 'axios';\n\nexport const loginUser = (userData, history) => (dispatch) => {\n    dispatch({ type: LOADING_UI });\n    axios.post('/login', userData)\n        .then(res => {\n            setAuthorizationHeader(res.data.token)\n            dispatch(getUserData());\n            dispatch({ type: CLEAR_ERRORS }); // clears the error before it redirects\n            history.push('/'); // redirects to homepage upon successful login\n        })\n        .catch(err => {\n            dispatch({\n                type: SET_ERRORS,\n                payload: err.response.data\n            })\n        });\n};\n\nexport const signupUser = (newUserData, history) => (dispatch) => {\n    dispatch({ type: LOADING_UI });\n    axios.post('/signup', newUserData)\n        .then(res => {\n            setAuthorizationHeader(res.data.token)\n            dispatch(getUserData());\n            dispatch({ type: CLEAR_ERRORS }); // clears the error before it redirects\n            history.push('/'); // redirects to homepage upon successful login\n        })\n        .catch(err => {\n            dispatch({\n                type: SET_ERRORS,\n                payload: err.response.data\n            })\n        });\n};\n\nexport const logoutUser = () => (dispatch) => {\n    localStorage.removeItem('FBIdToken');\n    delete axios.defaults.headers.common['Authorization'];\n    dispatch({ type: SET_UNAUTHENTICATED })\n}\n\nexport const getUserData = () => (dispatch) => {\n    dispatch({ type: LOADING_USER });\n    axios\n        .get('/user')\n        .then((res) => {\n            dispatch({\n                type: SET_USER,\n                payload: res.data\n            });\n        })\n        .catch((err) => console.log(err));\n};\n\nexport const uploadImage = (formData) => (dispatch) => {\n    dispatch({ type: LOADING_USER });\n    axios\n        .post('/user/image', formData)\n        .then(() => {\n            dispatch(getUserData());\n        })\n        .catch((err) => console.log(err));\n};\n\nexport const editUserDetails = (userDetails) => (dispatch) => {\n    dispatch({ type: LOADING_USER });\n    axios\n        .post('/user', userDetails)\n        .then(() => {\n            dispatch(getUserData());\n        })\n        .catch((err) => console.log(err));\n};\n\nconst setAuthorizationHeader = (token) => {\n    const FBIdToken = `Bearer ${token}`;\n            localStorage.setItem('FBIdToken', FBIdToken);\n            axios.defaults.headers.common['Authorization'] = FBIdToken;\n};"]},"metadata":{},"sourceType":"module"}